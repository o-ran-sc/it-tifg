# Hybrid-MPlane Test Procedure: O-RU Configurability Test (Positive Case)

## Test Case ID
TC-HMP-004

## Title
Verify that the O-RU accepts valid operational-info configuration and that the O-RU Controller applies it via RESTCONF.

## Objective
To confirm that the O-RU supports operational-info configuration by setting valid parameters such as re-call-home timer values, and that the configuration can be successfully applied through the O-RU Controller using RESTCONF.

## Scope
This test covers:
- Configuring operational-info parameters (e.g., re-call-home timer values) via RESTCONF
- Confirming that the O-RU accepts the configuration
- Optionally verifying that a `netconf-config-change` notification is generated by the O-RU Controller after successful NETCONF interaction with the O-RU

---

## Preconditions
- A NETCONF session between the O-RU Controller and the O-RU is active.
- The RESTCONF interface of the O-RU Controller is reachable.
- The O-RU supports operational-info configuration through the appropriate YANG modules.
- The RESTCONF client (test system) has credentials with write access to the configuration datastore exposed by the O-RU Controller.
- The O-RU Controller is capable of receiving and exposing NETCONF notifications (including `netconf-config-change`) via RESTCONF.

---

## Test Steps

### Step 1: Prepare Configuration Payload
1. Construct a valid RESTCONF `PUT` request payload setting:
   - Operational parameters such as `re-call-home-no-ssh-timer` or `max-call-home-attempts` values

### Step 2: Apply Configuration
2. Send the configuration request to the O-RU Controller via its RESTCONF interface.
3. Confirm that the RESTCONF response indicates successful application (e.g., HTTP 200 or 204).

### Step 3: Validate Configuration
4. Send a RESTCONF `GET` request to retrieve the affected subtree and confirm that the new values have been applied.

### Step 4 (Optional): Check for Configuration Change Notification
5. If notification subscription is active, check whether the O-RU Controller exposes a `netconf-config-change` notification as a result of the configuration.

---

## Expected Result
- The configuration is accepted by the O-RU via the O-RU Controller.
- The RESTCONF responses indicate success.
- The applied operational parameters are visible via follow-up retrieval.
- (Optional) A `netconf-config-change` notification is present and includes the affected nodes.

---

## Pass Criteria
- RESTCONF configuration request is accepted (no error status).
- Configured values are visible via RESTCONF `GET`.
- (Optional) Notification appears with correct timestamp and data path.

## Fail Criteria
- RESTCONF request fails (HTTP error or invalid payload).
- Configuration is not reflected in follow-up retrieval.
- O-RU or O-RU Controller enters an unstable state.
- (Optional) Expected notification is missing or malformed.

---

## Postconditions
- The configuration remains active on the O-RU unless explicitly cleared.
- The session with the O-RU remains active and usable for further interaction.

---

## Test Observables and Artifacts

| Artifact | Description |
|----------|-------------|
| **RESTCONF Config Payload** | JSON or XML payload used to configure operational parameters |
| **RESTCONF Response**       | HTTP status code and response body (if any) |
| **Follow-up Retrieval**     | JSON showing configured values as seen via RESTCONF |
| **Optional Notification**   | `netconf-config-change` entry with affected paths |
| **Timestamps**              | Time of request, response, and notification (if present) |
| **Controller Logs**         | Optional logs from the O-RU Controller showing NETCONF interaction |

---

## Notes
- This is a **positive test case** and assumes that the configuration is well-formed and valid.
- The configured operational parameters must be within the limits of the O-RU's declared capabilities.
- This test assumes that the O-RU Controller is capable of translating RESTCONF configuration into NETCONF `<edit-config>` and surfacing resulting notifications.
